# ModbusTCP Fetcher v1.1

Dieser Logikbaustein liest mittels Modbus TCP Werte aus.

## Eingänge

| Nummer | Datentyp | Default | Beschreibung |
| ------ | -------- | ------- | -------------|
|  1 | Zahl | 0 | Schaltet den Intervall-Timer des Baustein aus oder an. 0 = Aus, 1 = an. Ist der Timer deaktiviert, so sind noch manuelle Abrufe möglich. |
|  2 | Zahl | 5 Sekunden | Ist die Frequenz des Intervalls, wie oft der Baustein die Werte abfragt. - Nur wenn Intervall-Abfrage aktiv! | 
|  3 | Zahl | 1 | Bei einer 1 fragt der Baustein von außen gesteuert alle Werte ab | 
|  4 | Text | 127.0.0.1 | Die IP-Adresse für den Wechselrichter. Hostname aktuell nicht implementiert. (Unterstützt keine dynamischen Änderungen!) |
|  5 | Zahl | 502 | Der TCP-Port für Modbus. (Unterstützt keine dynamischen Änderungen!) |
|  6 | Zahl | 1 | Die Modbus Unit ID. (Unterstützt keine dynamischen Änderungen!) |
|  7 | Zahl | 0 | Word Order bei Multi-Byte Elementen. Per default: LittleEndian. (0: LittleEndian, 1: BigEndian - Unterstützt keine dynamischen Änderungen!) | 
|  8 | Zahl | 1 | Byte Order bei Multi-Byte Elementen. Per default: BigEndian. (0: LittleEndian, 1: BigEndian - Unterstützt keine dynamischen Änderungen!) | 
|  9 | Zahl | -1 | Modbus-Register für die Abfrage 1 in Dezimal Darstellung. -1: Abfrage wird deaktiviert. (Unterstützt keine dynamischen Änderungen!) | 
| 10 | Text | uint16 | Datentyp für die Abfrage 1. (Unterstützt keine dynamischen Änderungen!) | 
| 11 | Zahl | -1 | Modbus-Register für die Abfrage 2 in Dezimal Darstellung. -1: Abfrage wird deaktiviert. (Unterstützt keine dynamischen Änderungen!) | 
| 12 | Text | uint16 | Datentyp für die Abfrage 2. (Unterstützt keine dynamischen Änderungen!) | 
| 14 | Zahl | -1 | Modbus-Register für die Abfrage 3 in Dezimal Darstellung. -1: Abfrage wird deaktiviert. (Unterstützt keine dynamischen Änderungen!) | 
| 14 | Text | uint16 | Datentyp für die Abfrage 3. (Unterstützt keine dynamischen Änderungen!) | 
| 15 | Zahl | -1 | Modbus-Register für die Abfrage 4 in Dezimal Darstellung. -1: Abfrage wird deaktiviert. (Unterstützt keine dynamischen Änderungen!) | 
| 16 | Text | uint16 | Datentyp für die Abfrage 4. (Unterstützt keine dynamischen Änderungen!) |

## Ausgänge

Alle Ausgänge senden bei jedem Abruf den entsprechenden Wert - unabhängig davon, ob dieser sich geändert hat oder nicht.
Der Datentyp des KO, das mit dem Ausgang verbunden wird hängt vom Modbus-Register ab: Je nach Länge machen auch nur größere Genauigkeiten beim KO Sinn.

| Nummer | Beschreibung |
| ------ |  ------------- |
|  1 | Ausgelesener Wert vom Register 1 |
|  2 | Ausgelesener Wert vom Register 2 |
|  3 | Ausgelesener Wert vom Register 3 |
|  4 | Ausgelesener Wert vom Register 4 |

# Debug-Mode

Der Logikbaustein zeigt auch die RAW-Werte und weitere interne Werte im Debug-Fenster des Homeservers an. Dort sind auch die letzten Fehler einzusehen:

1. Homeserver hslist aufrufen - https://<HS IP>>/hslist
2. Listenschlüssel: `debug`, Username und Passwort von einem admin-User eingeben.
3. Unter *HSL2.0* oder *kostalInverterModbusTCP14180* die Fehler suchen oder die Werte überprüfen.

# Haftung / Gewährleistung

Es wird weder eine Haftung noch eine Gewährleistung übernommen. Für den Betrieb ist der Anlagenbetreiber bzw. Integrator verantwortlich.

# Sourcecode / Weiterführende Doku

* Der Sourcecode ist auf Github zu finden: [hs_kostalInverterModbusTCP](https://github.com/SvenBunge/hs_kostalInverterModbusTCP)
* Der Baustein wird im KNX-Forum diskutiert: [Thread](https://knx-user-forum.de/forum/%C3%B6ffentlicher-bereich/knx-eib-forum/1559910-logikbaustein-kostal-wechselrichter-via-modbus-tcp-abfragen)

# Lizenz & Faire Nutzung

* Der Baustein wird unter der LGPL 2.1 frei zur Verfügung gestellt.
* Die Nutzung des Logikbausteins ist für Endverbraucher  frei, wenn sie diese selbst und selbstständig in Betrieb nehmen und konfigurieren. - Integratoren haben eine angemessene Aufwandsentschädigung für die Erstellung auf das Paypal-Konto pro Installation zu zahlen, welches im [KNX-Forum-Thread](https://knx-user-forum.de/forum/%C3%B6ffentlicher-bereich/knx-eib-forum/1559910-logikbaustein-kostal-wechselrichter-via-modbus-tcp-abfragen) im obersten Post hinterlegt ist.
* Freie Software heißt nicht freie Wartung & Support und geschieht auf freiwilliger Basis
* Es wird keine Gewährleistung noch Haftung für Schäden aus der Nutzung des Bausteins übernommen